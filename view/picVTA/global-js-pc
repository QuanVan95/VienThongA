function formatNumber(n){return n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function closesosanh(n){$("#"+n).remove();var t=parseInt($("#Itemsosanh").val()),i=$("#textsearchsosanhh").val(),r=t-1,u="<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='"+r+"' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='vta-plus'><\/i><\/div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên "+i+"'><div class='search-suggestion-wrapper clearfix' id='showcompare'><\/div><\/div><\/div><\/div>";$("#inputsosanh").remove(),$("#sosanhid").append(u),$("#searchsosanh").keyup(function(){var n=$("#rootCategory").val(),t=$("#productId").val();SearchCompare(n,$(this).val(),t)})}function SearchCompare(n,t,i){t.length>1?($("#showcompare").hide(),$("#loader_searchsosanh").show(),$.ajax({type:"get",dataType:"json",url:"/api/searchcompare/"+n+"/"+t+"/"+i,success:function(n){try{n!=null?($("#showcompare").html(n),$("#showcompare").show(),$("#loader_searchsosanh").hide()):$("#showcompare").html("Không có sản phẩm")}catch(t){}}})):$("#showcompare").html("")}function Clickcompare(n){var i=$("#rootCategory").val(),r=$("#productId").val(),u=parseInt($("#Itemsosanh").val()),t=u+1;$.ajax({type:"get",dataType:"json",url:"api/getcompareproduct/"+i+"/"+n+"/"+r,success:function(n){var i;try{$("#sosanhid").append(n),t<=3?(i="<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='"+t+"' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='vta-plus'><\/i><\/div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên Điện thoại'><div class='search-suggestion-wrapper clearfix' id='showcompare'><\/div><\/div><\/div><\/div>",$("#inputsosanh").remove(),$("#sosanhid").append(i),$("#searchsosanh").keyup(function(){var n=$("#rootCategory").val(),t=$("#productId").val();SearchCompare(n,$(this).val(),t)})):(i="<div class='col-sm-3' id='inputsosanh'><input type='hidden' id='Itemsosanh' value='"+t+"' /><div class='product-compare product-compare-input'><div class='compare-input-icon'><i class='vta-plus'><\/i><\/div><div class='search-suggestion'><input type='text' class='input' id='searchsosanh' placeholder='Nhập tên Điện thoại'><div class='search-suggestion-wrapper clearfix' id='showcompare'><\/div><\/div><\/div><\/div>",$("#inputsosanh").remove(),$("#sosanhid").append(i),$("#searchsosanh").keyup(function(){var n=$("#rootCategory").val(),t=$("#productId").val();SearchCompare(n,$(this).val(),t)}),$("#inputsosanh").hide())}catch(r){}}})}function SearchCompare_3(n,t,i,r){t.length>1?($("#showcompare_3").hide(),$("#loader_searchsosanh").show(),$.ajax({type:"get",dataType:"json",url:"/api/searchcompare_3/"+n+"/"+t+"/"+i+"/"+r,success:function(n){try{n!=null?($("#showcompare_3").html(n),$("#showcompare_3").show(),$("#loader_searchsosanh").hide()):$("#showcompare").html("Không có sản phẩm")}catch(t){}}})):$("#showcompare_3").html("")}function InvalidInput(n){return $("#"+n).addClass("error"),$("#err-note").show(),$(".loading-pop-up").hide(),!1}function LoadchinhanhHeader(){var n="";$.ajax({type:"get",dataType:"json",url:"/api/getlistallbranch",success:function(t){$.each(t.ListArea,function(i,r){n+='<div data-location="mien-'+r.AreaId+'-v" class="sector-name">',n+="<a href=\"javascript:void(0);\" onclick=\"ga('send', 'event', { eventCategory: 'Chon cua hang "+r.AreaName+"', eventAction: 'Click "+r.AreaName+"', eventLabel: '"+r.AreaName+"'});\" >"+r.AreaName+"<\/a>",n+="<\/div>",n+='<ul class="clearlist scroll location-list sector" id="mien-'+r.AreaId+'-v">',$.each(t.ListCityBranch,function(i,u){u.AreaId===r.AreaId&&(n+='<li class="city">',n+=u.Cityname,n+='<ul class="clearlist">',$.each(t.ListDistrictBranch,function(i,r){r.CityId===u.Cityid&&(n+='<li class="district">',n+=r.Districtname,n+='      <ul class="clearlist">',$.each(t.ListBranchs,function(t,i){if(i.Districtid===r.DistrictId){var u="onclick=\"VtaJsPC.main.CreateCookieBranch('"+i.BranchsCodePos+"','"+i.BranchsAdd+"','"+i.GroupId+"')\"";n+="<li>",n+='  <a href="javascript:void(0);" '+u+">",n+=i.GroupId===4?'<span class="icon-vbox"><\/span>':'<span class="icon-vta"><\/span>',n+=i.BranchsShortAdd,n+="  <\/a>",n+=" <\/li>"}}),n+=" <\/ul>",n+="<\/li>")}),n+=" <\/ul>",n+="<\/li>")}),n+="<\/ul>"}),$("#showbranch").html(n),$("#loaderbranch").hide(),$("#showbranch").show();var u=$("#location-global").find(".location-list").children("li"),f=$("#location-global").find(".location-list").children("li").find("li"),e=$("#location-global").find(".dropdown-vta-tabs").children("div");e.click(function(n){n.preventDefault();var t=$(this),i=t.data("location");t.hasClass("active")||(t.addClass("active").siblings().removeClass("active"),$("#location-global .location-list").hide(),$("#location-global #"+i).fadeIn(function(){$(".scroll").perfectScrollbar("update")}))}),u.click(function(){var n=$(this);n.hasClass("active")?n.removeClass("active"):n.addClass("active").siblings().removeClass("active"),$(".scroll").perfectScrollbar("update")}),f.click(function(n){var t=$(this);n.stopPropagation(),t.hasClass("active")||t.addClass("active").siblings().removeClass("active"),$(".scroll").perfectScrollbar("update")});var o=$("#location-global .sector"),i=$("#location-global .city"),r=$("#location-global .district"),s=$(".location-list a");$("#filter-s").keyup(function(){var n=locdau($(this).val());delay(function(){s.each(function(){$this=$(this),$s_text=locdau($this.text()),$s_text.search(new RegExp(n,"i"))<0?$this.fadeOut().addClass("not",function(){}):$this.fadeIn().removeClass("not",function(){})}),r.each(function(){$this=$(this),$this.find("a").not(".not").length>0?$this.addClass("active").fadeIn():$this.removeClass("active").fadeOut()}),i.each(function(){$this=$(this),$this.find(".district.active").length>0?$this.addClass("active").fadeIn():$this.removeClass("active").fadeOut()}),o.each(function(){$this=$(this),$this.find(".city.active").length>0?$this.prev().removeClass("hidden"):$this.prev().addClass("hidden"),$(".sector-name").next().hide(),$(".sector-name").not(".hidden").first().next().show()}),num=$(".sector-name").length,$(".sector-name.hidden").length==num?$(".dropdown-vta-content").addClass("hethang"):$(".dropdown-vta-content").removeClass("hethang"),n==""&&(r.each(function(){$this=$(this),$this.removeClass("active")}),i.each(function(){$this=$(this),$this.removeClass("active")}),$(".sector-name").next().hide())},400)})}})}function strMessage(n){for(var i="",t=0;t<n.length;t++)n.charCodeAt(t)===13&&n.charCodeAt(t+1)===10?(t++,i+="<br>"):i+=n.charAt(t);return i}function makerandom(){for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<6;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}var VtaJs=VtaJs||{},VtaJsPC=VtaJsPC||{},currentMaxPageHeight,lxTragop=3.22,myPageScroll,homeCredit=[{TraTruoc:[{Value:20,Name:"20%"},{Value:30,Name:"30%"},{Value:40,Name:"40%"},{Value:50,Name:"50%"},{Value:60,Name:"60%"},{Value:70,Name:"70%"}],ThoiHanVay:[{Value:6,Name:"6 tháng"},{Value:8,Name:"8 tháng"},{Value:9,Name:"9 tháng"},{Value:10,Name:"10 tháng"},{Value:12,Name:"12 tháng"},{Value:15,Name:"15 tháng"}]}],acs=[{TraTruoc:[{Value:10,Name:"10%"},{Value:20,Name:"20%"},{Value:30,Name:"30%"},{Value:40,Name:"40%"},{Value:50,Name:"50%"},{Value:60,Name:"60%"},{Value:70,Name:"70%"}],ThoiHanVay:[{Value:6,Name:"6 tháng"},{Value:9,Name:"9 tháng"},{Value:12,Name:"12 tháng"},{Value:15,Name:"15 tháng"},{Value:18,Name:"18 tháng"}]}],hdFinance=[{TraTruoc:[{Value:20,Name:"20%"},{Value:30,Name:"30%"},{Value:40,Name:"40%"},{Value:50,Name:"50%"},{Value:60,Name:"60%"},{Value:70,Name:"70%"}],ThoiHanVay:[{Value:6,Name:"6 tháng"},{Value:9,Name:"9 tháng"},{Value:12,Name:"12 tháng"},{Value:15,Name:"15 tháng"},{Value:18,Name:"18 tháng"},{Value:24,Name:"24 tháng"}]}];VtaJsPC.main={AddPaymentPC:function(n,t){var i="VTAMobilePaymentCK";Cookies.set(i,n+"|"+t),t!=="TraGop"?VtaJsPC.main.AddCKHappyCare():Cookies.set("VTAMobileHappyCareCK","",{expires:-1}),ga("send","pageview","/mua-online.html")},BindDataDropdown:function(n,t,i){var r=$(t).val();$("#CityName").val($(t).find("option:selected").text()),VtaJsPC.service.ListDistrictByCityId(r,i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn quận huyện===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.DistrictId).text(this.Districtname),$("#"+n).append(t)})})},BindDataDropdownCity:function(n,t){$("#"+n).html(""),VtaJsPC.service.ListCity(t,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn thành phố===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.Cityid).text(this.Cityname),$("#"+n).append(t)})})},BindDataDropdownBranch:function(n,t){var i=$(t).val();$("#DistrictName").val($(t).find("option:selected").text()),VtaJsPC.service.ListBranchByDistrictId(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn chi nhánh===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.BranchsCodePos).text(this.BranchsAdd),$("#"+n).append(t)})})},SetDistrictName:function(n){$("#DistrictName").val($(n).find("option:selected").text())},AddCKHappyCare:function(){var i=$("#check_ghbh").is(":checked"),r=$("#check_bvtd").is(":checked"),n="",t="";i&&(n="GHBH|"+$("#check_ghbh").val()),r&&(t="BVTD|"+$("#check_bvtd").val()),(n!==""||t!=="")&&Cookies.set("VTAMobileHappyCareCK",n+"*"+t)},FormatNumber:function(n,t,i,r){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+n)?+n:0,f=isFinite(+t)?Math.abs(t):0,o=typeof r=="undefined"?",":r,s=typeof i=="undefined"?".":i,u="",h=function(n,t){var i=Math.pow(10,t);return""+Math.round(n*i)/i};return u=(f?h(e,f):""+Math.round(e)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length>f&&(u[1]=u[1]||"",u[1]+=new Array(f-u[1].length+1).join("0")),u.join(s)},AddName:function(n,t){$("#"+n).val($(t).find("option:selected").text())},BindDataDropdownBranchId:function(n,t){var i=$(t).val();$("#DistrictName").val($(t).find("option:selected").text()),VtaJsPC.service.ListBranchByDistrictId(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn chi nhánh===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.BranchsId),t.attr("storecode",this.BranchsCodePos),t.text(this.BranchsAdd),$("#"+n).append(t)})})},CalcTraGop:function(){var n=$("input[name=DonViTraGop]:checked").val(),e=$("#ThoiGianTraGop_"+n).val(),u,t;if($("#ThoiGianTraGop").val(e),u=$("#PhanTramTraTruoc_"+n).val(),$("#PhanTramTraTruoc").val(u),t=$("#TraGopType_"+n).val(),$("#LaiXuatDacBiet").val(t),t!=undefined&&t!=="-1")lxTragop=t;else switch(n){case"ACS":lxTragop=2.2;break;case"HDF":lxTragop=3.05;break;case"PPF":lxTragop=3.22}var i=$("#totalPrice").val(),o=$("#PhanTramTraTruoc").val(),f=$("#ThoiGianTraGop").val(),r=Math.round(i*o/1e5)*1e3,s=i-r+(i-r)*lxTragop*f/100,h=Math.round(s/(f*1e3))*1e3;$("p[name=lblTraTruoc").text("0 đ"),$("p[name=lblTraThang").text("0 đ"),$("select[name=ddlPhanTramTraTruoc]").attr("disabled","disabled"),$("#PhanTramTraTruoc_"+n).removeAttr("disabled"),$("select[name=ddlThoiGianTraGop]").attr("disabled","disabled"),$("#ThoiGianTraGop_"+n).removeAttr("disabled"),$("select[name=ddlTraGopType]").attr("disabled","disabled"),$("#TraGopType_"+n).removeAttr("disabled"),$("#currentTtruoc_"+n).text(VtaJsPC.main.FormatNumber(r)+" đ"),$("#currentGThang_"+n).text(VtaJsPC.main.FormatNumber(h)+" đ")},BindDataDropdownSubCategory:function(n,t){var i=$(t).val();VtaJsPC.service.ListSubCategoryById(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("Chọn loại sản phẩm")),$(t).each(function(){var t=$("<option />");t.attr("value",this.CategoryId).text(this.CategoryName),$("#"+n).append(t)})})},BindDataDropdownProduct:function(n,t){var i=$(t).val();VtaJsPC.service.ListProductById(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("Chọn sản phẩm")),$(t).each(function(){var t=$("<option />");t.attr("value",this.ProductId).text(this.ProductName),$("#"+n).append(t)})})},CreateCookieBranch:function(n,t,i){Cookies.set("VtaCookieMobile_CurrentBranch",n,{expires:7}),Cookies.set("VtaCookieMobile_CurrentBranchAddress",t,{expires:7}),Cookies.set("VtaCookieMobile_CurrentBranchGroupId",i,{expires:7}),ga("send",{hitType:"event",eventCategory:"pc_chon_chi_nhanh",eventAction:"click",eventLabel:n});var r=window.location.origin+window.location.pathname;window.location.href=r+"?cn="+n},RegisterDatTruoc:function(){var s=$("#productId").val(),h=$("#popup-dattruoc input[name=ColorId]:checked").val(),c=$("#popup-dattruoc input[name=Gender]:checked").val(),i=$("#popup-dattruoc #FullName").val(),l=$("#popup-dattruoc #Email").val(),r=$("#popup-dattruoc #CMND").val(),n=$("#popup-dattruoc #Phone").val(),a=$("#popup-dattruoc input[name=RecieveType]:checked").val(),u=$("#popup-dattruoc #CityName").val(),f=$("#popup-dattruoc #DistrictName").val(),t="",e,o;if(t=a==="VTA"?$("#popup-dattruoc #AddressName").val()+","+f+","+u:$("#popup-dattruoc #Address").val()+","+f+","+u,e=$("#popup-dattruoc input[name=PaymentType]:checked").val(),i===""){$("#popup-dattruoc #FullName").addClass("error"),$("#err-note-dattruoc").show();return}if(r===""){$("#popup-dattruoc #CMND").addClass("error"),$("#err-note-dattruoc").show();return}if(n===""){$("#popup-dattruoc #Phone").addClass("error"),$("#err-note-dattruoc").show();return}if(o=/\d{6,11}/,!o.test(n)){$("#popup-dattruoc #Phone").addClass("error"),$("#err-note-dattruoc").show();return}VtaJsPC.service.InsertDatTruoc(s,h,c,i,l,n,r,t,e,function(n){n.Data?($.fancybox.close(),$.fancybox.open("#popup-dattruoc-success")):($.fancybox.close(),$.fancybox.open("#popup-dattruoc-fail"))})},SearchProduct:function(){window.location.href="tim-kiem?q="+$("#searchvta").val()}},VtaJsPC.service={ListDistrictByCityId:function(n,t,i){var r="/api/vta/listdistrictbycity/"+n;t!=undefined&&(r=r+"/"+t),$.ajax({type:"get",dataType:"json",url:r,success:function(n){typeof i=="function"&&i(n)}})},ListBranchByDistrictId:function(n,t){$.ajax({type:"get",dataType:"json",url:"/api/vta/listbranchbydistrict/"+n,success:function(n){typeof t=="function"&&t(n)}})},ListSubCategoryById:function(n,t){$.ajax({type:"get",dataType:"json",url:"api/vta/listcategorymodeldatabyid/"+n,success:function(n){typeof t=="function"&&t(n)}})},ListProductById:function(n,t){$.ajax({type:"get",dataType:"json",url:"api/vta/listproductmodelbyid/"+n,success:function(n){typeof t=="function"&&t(n)}})},GetProductDetailById:function(n,t,i){$.ajax({type:"get",dataType:"json",url:"api/vta/getproductdetailbyid/"+n+"/"+t,success:function(n){typeof i=="function"&&i(n)}})},RenderMoreMayDoiTraProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmoremaydoitra",success:function(n){typeof t=="function"&&t(n)}})},LoadMoreKhuyenMaiProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmoremaydoitra",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreXaHangProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmorexahang",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreCategoryProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$(n).attr("suburl2");$.ajax({type:"get",dataType:"json",data:{subUrl_2:u},url:"/api/loadmorecate/"+i+"/"+r,success:function(n){typeof t=="function"&&t(n)}})},GetProductsSearch:function(n){if(n.length<2||n.length>50){$(".searchContaint").html("");return}$.ajax({type:"get",dataType:"json",url:"/api/searchproduct/"+n,success:function(n){try{$(".searchContaint").html(VtaJs.main.createHtmSearchProductRespond(n))}catch(t){}}})},GetSearchSosanh:function(){},ListCity:function(n,t){var i="/api/vta/listcityapi";n!=undefined&&(i=i+"/"+n),$.ajax({type:"get",dataType:"json",url:i,success:function(n){typeof t=="function"&&t(n)}})},InsertDatTruoc:function(n,t,i,r,u,f,e,o,s,h){$.ajax({type:"post",dataType:"json",data:{ProductId:n,ColorId:t,Gender:i,FullName:r,Email:u,Phone:f,Cmnd:e,Address:o,Payment:s},url:"/api/vta/insertdattruoc",success:function(n){typeof h=="function"&&h(n)}})},RenderMoreSearchProduct:function(n,t){var i=$(n).attr("page"),r=$("#keysearch").val();$.ajax({type:"get",data:{q:r,page:i},url:"/search/LoadMoreProductSearch",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreSearchNews:function(n,t){var i=$(n).attr("page"),r=$("#keysearch").val();$.ajax({type:"get",data:{q:r,page:i},url:"/search/LoadMoreNewsSearch",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreCategory:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$(n).attr("suburl2");$.ajax({type:"get",data:{cateid:i,page:r,subUrl2:u},url:"/Category/LoadMoreCate",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreXaHang:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/XaHang/LoadMoreXaHang",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreXaHangDetail:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/XaHang/LoadMoreXaHangDetail",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreMayDoiTra:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o="0";$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/MayDoiTra/LoadMoreMayDoiTra",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreMayDoiTraForModel:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/MayDoiTra/LoadMoreMayDoiTraForModel",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreMayDoiTraNew:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o="0";$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/MayDoiTra/LoadMoreMayDoiTraNew",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreMayDoiTraForModelNew:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/MayDoiTra/LoadMoreMayDoiTraForModelNew",success:function(n){typeof t=="function"&&t(n)}})},RenderThuongHieu:function(n,t){var i=$("#doanhmucSelect").val();$.ajax({type:"post",data:{parentId:i},url:"/XaHang/LoadThuongHieu",success:function(n){typeof t=="function"&&t(n)}})}},VtaJs.main={formartCurrency:function(n,t){return t+" "+n.toFixed(2).replace(/./g,function(n,t,i){return t>0&&n!=="."&&(i.length-t)%3==0?","+n:n})},createHtmSearchProductRespond:function(n){if(JSON.stringify(n)==="{}"||n.length===0)return"<li ><span class='no-result'>Không tìm thấy kết quả nào!!!<\/span><\/li>";var t="";return n.forEach(function(n){try{var i=n.price,r="<sup>đ<sup>";i===0?(i="[Liên hệ]",r=""):i=VtaJs.main.formartCurrency(n.price,"").replace(".00",""),t=t+'<li><a href="/'+n.url+'.html" rel="external" data-ajax="false"><div class="quicks-image"><img alt="" src="'+n.cdn_image_path+'" class="img-responsive"><\/div><div class="quicks-content"><span class="quicks-product-name">'+n.product+'<\/span><span class="quicks-product-price">'+i+r+" <\/span><\/div><\/a><\/li>"}catch(u){}}),t},createHtmSearchSosanhRespond:function(n){if(JSON.stringify(n)==="{}"||n.length===0)return"<li ><span class='no-result'>Không tìm thấy kết quả nào!!!<\/span><\/li>";var t="";return n.forEach(function(){try{t=t+'<li><a href="" rel="external" data-ajax="false"> asdf<\/a><\/li>'}catch(i){}}),t},ShowSeletedBranchWhenPostBack:function(){var n,t;try{n=Cookies.get("VtaCookieMobile_CurrentBranch"),n!=undefined&&n!=="CS_0000042"&&(t=Cookies.get("VtaCookieMobile_CurrentBranchAddress"),$(".dropdown-vta-search").html(t))}catch(i){}},createFullBranchsTreeHtml:function(n,t){var r="";if(n!==undefined&&t!==undefined)$.each(t,function(t,i){r=r+'<div data-role="collapsible" class="left-menu-city-collapse" ><h4 class="h4-city">'+i.CityName+"<\/h4>"+VtaJs.main.createHtmlNodeDistrictAndBranchs(i.CityId,n)+"<\/div>"});else return null;return r},createHtmlNodeDistrictAndBranchs:function(n,t){var i="",r=VtaJs.main.getListDistrictIdByCity(n,t);return r.length<=0?null:($.each(r,function(r,u){var f=VtaJs.main.getListBranchIdByCity(n,u.id,t);if(f.length>0)i=i+'<div id="city-'+u.id+'" data-role="collapsible" class="left-menu-district-collapse" ><h4 class="h4-district"><span > &diams; <\/span>'+u.name+"<\/h4>"+VtaJs.main.createHtmlListBranch(f,t)+"<\/div>";else return null}),i)},getListDistrictIdByCity:function(n,t){var i=[];return $.each(t,function(t,r){if(n===r.CityId)try{var u=!1;$.each(i,function(n,t){try{t.id===r.DistrictId&&(u=!0)}catch(i){}}),u!==!0&&i.push({id:r.DistrictId,name:r.DistrictName})}catch(f){}}),i},getListBranchIdByCity:function(n,t,i){var r=[];return $.each(i,function(i,u){n===u.CityId&&t==u.DistrictId&&r.push(u.BranchId)}),r},createHtmlListBranch:function(n,t){var i='<div id="wrap-branch-ul">';return i=i+'<ul class="ul-branchList" data-role="listview" data-inset="true" data-collapsed="true">',$.each(n,function(n,r){$.each(t,function(n,t){if(t.BranchId===r){var u="'"+t.BranchCodePos+"'";i=i+'<li  class="li-branchItem"><span onclick="VtaJs.main.CreateCookieBranch('+u+",'"+t.BranchAdress+'\');" id="branch-'+t.BranchCodePos+'" class="span-branch"> &bull; '+t.BranchAdress+"<\/span><\/li>"}})}),i=i+"<\/ul><\/div>"},BindDataDropdownBranchId:function(n,t){var i=$(t).val();$("#DistrictName").val($(t).find("option:selected").text()),VtaJs.service.ListBranchByDistrictId(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn chi nhánh===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.BranchsId).text(this.BranchsAdd),$("#"+n).append(t)})})},RegisterTraiNghiem:function(){var f=$("#productId").val(),i=$(".info-trainghiem #FullName").val(),n=$(".info-trainghiem #Phone").val(),e="CS_0000004",r=$("#Date").val(),t=$("#Time").val(),o=t.split("|")[0],s=t.split("|")[1],u;if(i===""){$(".info-trainghiem #FullName").addClass("error-input-text"),$("#err-note").show();return}if(n===""){$(".info-trainghiem #Phone").addClass("error-input-text"),$("#err-note").show();return}if(u=/\d{6,11}/,!u.test(n)){$(".info-trainghiem #Phone").addClass("error-input-text"),$("#err-note").show();return}if(r===""){$("#Date").addClass("error-input-text"),$("#err-note").show();return}if(t===""){$("#Date").addClass("error-input-text"),$("#err-note").show();return}VtaJs.service.InsertTraiNghiem(f,i,n,e,r,o,s,function(n){n.Data?(alert("Chúc mừng bạn đăng ký trải nghiệm thành công"),$("#err-note").hide(),$("#range-trainghiem").hide()):alert("Đăng ký trải nghiệm that bại. Vui long thử lại!!!")})},CreateCookieBranch:function(n,t){Cookies.set("VtaCookieMobile_CurrentBranch",n,{expires:7}),Cookies.set("VtaCookieMobile_CurrentBranchAddress",t,{expires:7}),ga("send",{hitType:"event",eventCategory:"pc_chon_chi_nhanh",eventAction:"click",eventLabel:n});var i=window.location.origin+window.location.pathname;window.location.href=i+"?cn="+n},BindDataDropdown:function(n,t){var i=$(t).val();$("#CityName").val($(t).find("option:selected").text()),VtaJs.service.ListDistrictByCityId(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn quận huyện===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.DistrictId).text(this.Districtname),$("#"+n).append(t)})})},BindDataDropdownBranch:function(n,t){var i=$(t).val();$("#DistrictName").val($(t).find("option:selected").text()),VtaJs.service.ListBranchByDistrictId(i,function(t){$("#"+n).html(""),$("#"+n).append($("<option />").attr("value","0").text("===Chọn chi nhánh===")),$(t).each(function(){var t=$("<option />");t.attr("value",this.BranchsCodePos).text(this.BranchsAdd),$("#"+n).append(t)})})},SetDistrictName:function(n){$("#DistrictName").val($(n).find("option:selected").text())},AddCKHappyCare:function(){var i=$("#check_ghbh").is(":checked"),r=$("#check_bvtd").is(":checked"),n="",t="";i&&(n="GHBH|"+$("#check_ghbh").val()),r&&(t="BVTD|"+$("#check_bvtd").val()),(n!=""||t!="")&&Cookies.set("VTAMobileHappyCareCK",n+"*"+t)},ShowSeletedBranchWhenPostBack:function(){var n;try{if(n=Cookies.get("VtaCookieMobile_CurrentBranch"),n!=undefined&&n!=="CS_0000042"){var i=Cookies.get("VtaCookieMobile_CurrentBranchAddress"),r=Cookies.get("VtaCookieMobile_CurrentBranchGroupId"),t="icon-vta";r==="2"&&(t="icon-vbox"),$(".location-global-form").html('<div class="location-dropdown-icon"><i class="vta-arrow-down"><\/i><\/div><span class="'+t+'"><\/span>  '+i)}}catch(u){}},FormatNumber:function(n,t,i,r){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+n)?+n:0,f=isFinite(+t)?Math.abs(t):0,o=typeof r=="undefined"?",":r,s=typeof i=="undefined"?".":i,u="",h=function(n,t){var i=Math.pow(10,t);return""+Math.round(n*i)/i};return u=(f?h(e,f):""+Math.round(e)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length>f&&(u[1]=u[1]||"",u[1]+=new Array(f-u[1].length+1).join("0")),u.join(s)}},VtaJs.service={GetProductsSearch:function(n){if(n.length<2||n.length>50){$(".searchContaint").html("");return}$.ajax({type:"get",dataType:"json",url:"/api/searchproduct/"+n,success:function(n){try{$(".searchContaint").html(VtaJs.main.createHtmSearchProductRespond(n))}catch(t){}}})},GetSearchSosanh:function(){},InsertTraiNghiem:function(n,t,i,r,u,f,e,o){$.ajax({type:"post",dataType:"json",data:{ProductId:n,FullName:t,Phone:i,StoreCode:r,Date:u,TimeFrom:f,TimeTo:e},url:"/api/vta/inserttrainghiem",success:function(n){typeof o=="function"&&o(n)}})},InsertComment:function(n,t,i,r,u,f){$.ajax({type:"post",dataType:"json",data:{fullname:n,email:t,commnet:i,productId:r,score:u},url:"/api/vta/insertcomment",success:function(n){typeof f=="function"&&f(n)}})},RenderMoreCategoryProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$(n).attr("suburl2");$.ajax({type:"get",dataType:"json",data:{subUrl_2:u},url:"/api/loadmorecate/"+i+"/"+r,success:function(n){typeof t=="function"&&t(n)}})},RenderMoreXaHangProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmorexahang/",success:function(n){typeof t=="function"&&t(n)}})},RenderMoreMayDoiTraProduct:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmoremaydoitra",success:function(n){typeof t=="function"&&t(n)}})},RenderInsertComment:function(n,t){var i=$(n).attr("cateid"),r=$(n).attr("page"),u=$("#brand").val(),f=$("#price").val(),e=$("#branch").val(),o=$("#product_code").val();$.ajax({type:"post",dataType:"json",data:{productCode:o,price:f,cid:i,brand:u,branch:e,page:r},url:"/api/loadmoremaydoitra/",success:function(n){typeof t=="function"&&t(n)}})}};$(document).on("pageinit",function(){$.mobile.ajaxEnabled=!1});$(document).on("mobileinit",function(){$.mobile.ajaxEnabled=!1});$(function(){$('img[src*="insight.adsrvr.org"]').hide(),VtaJs.main.ShowSeletedBranchWhenPostBack();$("#search-branch-txt").on("click",function(){$(".menu_search_chinhanh").addClass("menu_search_chinhanh_click"),$("#categry-product-list").hide(),$("#wrap-all-root-branchs").show(),$(".back-search-branch").show()});$(".back-search-branch").bind("click",function(){$(".menu_search_chinhanh").removeClass("menu_search_chinhanh_click"),$(this).hide(),$("#categry-product-list").show(),$("#wrap-all-root-branchs").hide()}),$(".location-global-style .dropdown-vta-clear").bind("click",function(){Cookies.set("VtaCookieMobile_CurrentBranch","",{expires:-1}),Cookies.set("VtaCookieMobile_CurrentBranchAddress","",{expires:-1}),$(".location-global-form").html("<div class='location-dropdown-icon'><i class='vta-arrow-down'><\/i><\/div><span class='location-icon'><i class='vta-location'><\/i><\/span> Chọn chi nhánh để xem giá và khuyến mãi"),window.location.href=window.location.origin+window.location.pathname});$("#btn-trainghiem").on("click",function(){$("#btn-trainghiem").hide(),$(".desc-trainghiem").hide(),$(".info-trainghiem").slideDown()});$(".search-global .input-search").keyup(function(){VtaJsPC.service.GetProductsSearch($(this).val())}),$(document).mouseup(function(n){var t=$(".search-global");t.is(n.target)||t.has(n.target).length!==0?t.find(".searchContaint").addClass("visible").removeClass("hidden"):t.find(".searchContaint").addClass("hidden").removeClass("visible")}),$("#search_sosanh").keyup(function(){var n=$("#productId").val();VtaJsPC.service.GetSearchSosanh(n,$(this).val())}),$("#col-sm-6").mouseout(function(){}),$("#searchDialog").bind({popupafterclose:function(){$("#main-page").removeClass("fixbody")}}),$("#searchDialog").bind({popupafteropen:function(){$("#main-page").addClass("fixbody")}}),$("input[name=PaymentType]").change(function(){$(this).val()==="21"?$("#payment-online-range").slideDown():$("#payment-online-range").slideUp()}),$("#chkCoupon").change(function(){this.checked?$("#chkCoupon-range").slideDown():$("#chkCoupon-range").slideUp()}),$("#IsVat").change(function(){this.checked?$("#vat-range").slideDown():$("#vat-range").slideUp()}),$("#searchvta").keypress(function(n){n.which==13&&(window.location.href="tim-kiem?q="+$("#searchvta").val())}),$("input[name=RecieveType]").change(function(){this.value==="VTA"?($("#StoreCode").show(),$("#Address").hide(),VtaJsPC.main.BindDataDropdownCity("CityId",!0),$("#DistrictId").html(""),$("#DistrictId").append($("<option />").attr("value","0").text("===Chọn quận huyện===")),$("#StoreCode").html(""),$("#StoreCode").append($("<option />").attr("value","0").text("===Chọn chi nhánh===")),$("#CityId").attr("haveStore","true")):($("#StoreCode").hide(),$("#Address").show(),VtaJsPC.main.BindDataDropdownCity("CityId",!1),$("#DistrictId").html(""),$("#DistrictId").append($("<option />").attr("value","0").text("===Chọn quận huyện===")),$("#CityId").attr("haveStore","false"))});$("#CategoryPager").on("click",function(){$(".loader").show(),$("#CategoryPager").hide();var t=$("#CategoryPager").attr("page"),n=parseInt($("#lblNumCont").text());VtaJsPC.service.RenderMoreCategory(this,function(i){var r=$(i);$("#cateProductContent").append(r).masonry("appended",r),$(".loader").hide(),$("#CategoryPager").show(),n-30<=0?$("#CategoryPager").hide():($("#CategoryPager").attr("page",parseInt(t)+1),$("#lblNumCont").text(n-30))})});LoadchinhanhHeader();var t=220,n=1e3;jQuery(window).scroll(function(){jQuery(this).scrollTop()>t?jQuery(".back-to-top").fadeIn(n):jQuery(".back-to-top").fadeOut(n)}),jQuery(".back-to-top").click(function(t){return t.preventDefault(),jQuery("html, body").animate({scrollTop:0},n),!1})}),$("#searchsosanh").keyup(function(){var n=$("#rootCategory").val(),t=$("#productId").val();SearchCompare(n,$(this).val(),t)}),$("#searchsosanh_3").keyup(function(){var n=$("#rootCategory").val(),t=$("#productId").val(),i=$("#productIdS").val();SearchCompare_3(n,$(this).val(),t,i)})